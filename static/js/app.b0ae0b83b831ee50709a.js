webpackJsonp([1],{BuO0:function(t,e){},LGCc:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("/5sW"),n=r("Dd8w"),o=r.n(n),i=r("//Fk"),s=r.n(i),l=r("mtWM"),c=r.n(l),u=r("zL8q"),p=r.n(u);function d(t,e){return new s.a(function(r,a){c.a.get(t,{params:e}).then(function(t){r(t.data)}).catch(function(t){a(t.data)})})}function f(t,e){return new s.a(function(r,a){c.a.post(t,e).then(function(t){r(t.data)}).catch(function(t){a(t.data)})})}c.a.defaults.baseURL="https://hrm-api.1919.cn/hrm/ejr/api",c.a.defaults.timeout=1e4,c.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",c.a.interceptors.request.use(function(t){var e=sessionStorage.getItem("token");return e&&(t.headers.authorization=e),t.headers["x-rpc-wrap"]=1,t},function(t){return s.a.error(t)}),c.a.interceptors.response.use(function(t){return 200===t.status?s.a.resolve(t):s.a.reject(t)},function(t){if(t.response.status)return u.Message.error(t.response.data.msg),s.a.reject(t.response)});var m=["满满的正能量","早晨起来，拥抱太阳","让身体充满，灿烂的阳光","满满的正能量","嘴角向下，会迷失方向","嘴角向上，蒸蒸日上","世上没有路，都是人开创","脚底板磨破了，道路就顺畅","满满的正能量"],g=0,h={data:function(){return{timer:null,isLoading:!1,dialogTableVisible:!0,token:"",currentTextIndex:0,buttonText:"满满的正能量",reportDateArr:[],form:{projectId:"",stageId:"",attendType:"COMPANY",reportDetail:"",reportType:"WHOLE_DAY"},attendTypeList:[],reportTypeList:[],projectList:[],participateStage:[],rules:{projectId:[{required:!0,message:"请选择项目名称",trigger:"blur"}],stageId:[{required:!0,message:"请选择项目阶段",trigger:"blur"}],attendType:[{required:!0,message:"请选择所在地",trigger:"blur"}],reportType:[{required:!0,message:"请选择报工类型",trigger:"blur"}],reportDetail:[{required:!0,min:10,message:"请填写日志（长度大于10字）",trigger:"blur"}]}}},mounted:function(){var t=this;this.getAttendType(),this.getReportType(),setInterval(function(){t.getButtonText()},3e3)},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.isLoading=!0;var r=e.reportDateArr,a=0;e.timer=setInterval(function(){r.length!==a?(e.submitFun(r[a]),a++):clearInterval(e.timer)},2e3),setTimeout(function(){e.isLoading=!1},3e3)}})},submitFun:function(t){var e=this,r=o()({reportDate:t},this.form);f("/dailyReport/add",r).then(function(t){e.$message.success(r.reportDate+" 提交成功")})},getButtonText:function(){this.buttonText=m[g],g>=m.length-1?g=0:g+=1,console.log(this.buttonText,g)},randomNumBoth:function(t,e){var r=e-t,a=Math.random();return t+Math.round(a*r)},handleInputToken:function(){this.token&&sessionStorage.setItem("token",this.token),this.dialogTableVisible=!1,this.getProjectList()},handleChangeProject:function(t){this.getParticipateStage([t])},getAttendType:function(){var t=this;d("/meta/dict/attend-type").then(function(e){t.attendTypeList=e.data})},getReportType:function(){var t=this;d("/meta/dict/report-type").then(function(e){t.reportTypeList=e.data})},getProjectList:function(){var t=this;d("/project/getParticipateProject").then(function(e){t.projectList=e.data})},getParticipateStage:function(t){var e=this;f("/stage/getParticipateStage",{projectIds:t}).then(function(t){e.participateStage=t.data})}}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-form",{ref:"form",staticClass:"form-conntainer",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目名称"},on:{change:t.handleChangeProject},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.projectList,function(t){return r("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目阶段",prop:"stageId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目阶段"},model:{value:t.form.stageId,callback:function(e){t.$set(t.form,"stageId",e)},expression:"form.stageId"}},t._l(t.participateStage,function(t){return r("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"所在地",prop:"attendType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所在地"},model:{value:t.form.attendType,callback:function(e){t.$set(t.form,"attendType",e)},expression:"form.attendType"}},t._l(t.attendTypeList,function(t){return r("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"报工日期"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"dates",placeholder:"选择时间（可多选）",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.reportDateArr,callback:function(e){t.reportDateArr=e},expression:"reportDateArr"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"报工类型",prop:"reportType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择活动区域"},model:{value:t.form.reportType,callback:function(e){t.$set(t.form,"reportType",e)},expression:"form.reportType"}},t._l(t.reportTypeList,function(t){return r("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"日志",prop:"reportDetail"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.reportDetail,callback:function(e){t.$set(t.form,"reportDetail",e)},expression:"form.reportDetail"}})],1),t._v(" "),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.onSubmit("form")}}},[t._v(t._s(t.buttonText))])],1)],1),t._v(" "),t.dialogTableVisible?r("el-dialog",{attrs:{title:"填写token","close-on-click-modal":!1,visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[r("el-input",{staticClass:"dialog-textarea",attrs:{type:"textarea"},model:{value:t.token,callback:function(e){t.token="string"==typeof e?e.trim():e},expression:"token"}}),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.handleInputToken}},[t._v("确 定")])],1)],1):t._e()],1)},staticRenderFns:[]};var y={name:"App",data:function(){return{url:"./static/lzxg.html"}},components:{WorkReport:r("VU/8")(h,v,!1,function(t){r("BuO0"),r("pEjv")},"data-v-713917a0",null).exports}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("WorkReport",{staticClass:"work-report"}),this._v(" "),e("iframe",{staticClass:"iframe",attrs:{src:this.url}})],1)},staticRenderFns:[]};var T=r("VU/8")(y,b,!1,function(t){r("LGCc")},null,null).exports;r("tvR6");a.default.config.productionTip=!1,a.default.use(p.a),new a.default({el:"#app",render:function(t){return t(T)}})},pEjv:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b0ae0b83b831ee50709a.js.map